# Plan 07-02: Agent Read API Endpoints

## Goal
Create REST API endpoints for agents to read campaign and keyword data.

## Requirements Covered
- AGNT-02: Agent can read campaigns, keywords, metrics via GET endpoints
- AGNT-08: All API responses use consistent JSON format

## Tasks

### 1. Create API Response Helper (lib/api-response.ts)
Consistent response format:
```typescript
export function apiResponse(data, meta?)
export function apiError(code, message, status?)
```

### 2. Create /api/agent/campaigns Endpoint
GET - Returns campaigns with metrics
Query params: type, status, range

### 3. Create /api/agent/keywords Endpoint
GET - Returns keywords with metrics
Query params: campaignId, adGroupId, matchType, range

### 4. Create /api/agent/metrics Endpoint
GET - Returns aggregate metrics summary
Query params: range

### 5. Create /api/agent/status Endpoint
GET - Returns connection and sync status
- Amazon connection status
- Last sync time
- Agent last heartbeat

### 6. Apply Agent Auth Middleware to All Endpoints

## Response Examples

**Campaigns:**
```json
{
  "data": {
    "campaigns": [...],
    "total": 25
  },
  "meta": { "timestamp": "..." }
}
```

**Metrics:**
```json
{
  "data": {
    "impressions": 10000,
    "clicks": 500,
    "spend": 250.00,
    ...
  },
  "meta": { "range": "30d" }
}
```

## Verification
- [ ] All endpoints require valid API key
- [ ] Campaigns endpoint returns data
- [ ] Keywords endpoint returns data
- [ ] Metrics endpoint returns aggregated data
- [ ] Status endpoint returns system status

## Estimated Complexity
Medium
