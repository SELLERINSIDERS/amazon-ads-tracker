# Plan 08-02: Rules Execution Engine

## Goal
Create rules execution engine with cooldown and execution history.

## Requirements Covered
- RULE-03: Rules engine enforces cooldown periods
- RULE-04: Rules respect safety limits and are logged
- RULE-02: User can view execution history

## Tasks

### 1. Create Rules Executor (lib/rules-executor.ts)
- evaluateCondition() - check if rule condition is met
- executeAction() - perform rule action (respecting safety limits)
- runRule() - execute single rule against entities
- runAllRules() - execute all enabled rules

### 2. Integrate with Safety Limits
- Check safety limits before executing actions
- Log failed actions with reason

### 3. Create Execution History UI
- Show recent executions on rules page
- Filter by rule, result, date

### 4. Create API Endpoint for Manual Rule Execution
POST /api/rules/execute - manually trigger rules

### 5. Add Cooldown Logic
- Track lastExecutedAt per entity per rule
- Skip if within cooldown period

## Condition Types
- acos_above, acos_below
- roas_above, roas_below
- clicks_above, impressions_above
- orders_below

## Action Types
- decrease_bid (by %)
- increase_bid (by %)
- pause
- enable

## Verification
- [ ] Rules execute against matching entities
- [ ] Cooldown prevents re-execution
- [ ] Safety limits enforced
- [ ] Executions logged to history
- [ ] Actions logged to audit trail

## Estimated Complexity
High
